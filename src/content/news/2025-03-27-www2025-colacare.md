---
title: 北大WWW2025 | 让DeepSeek和DeepSeek像人类医生一样进行会诊预测患者病情
date: 2025-03-27
excerpt: 2025年1月，北京大学王亚沙教授、马连韬研究助理教授团队在 CCF-A 类国际顶级会议 WWW (International World Wide Web Conference 2025) 上发表了题为"ColaCare: Enhancing Electronic Health Record Modeling through Large Language Model-Driven Multi-Agent Collaboration"的研究论文。
featured: true
tags: ['WWW2025', 'DeepSeek', '多智能体协作', '电子病历', '临床决策']
category: research
image: /images/www2025-colacare-header.jpg
---

2025年1月，北京大学王亚沙教授、马连韬研究助理教授团队在 CCF-A 类国际顶级会议 WWW (International World Wide Web Conference 2025) 上发表了题为"ColaCare: Enhancing Electronic Health Record Modeling through Large Language Model-Driven Multi-Agent Collaboration"的研究论文。该研究将DeepSeek大语言模型与领域专家模型深度融合，构建了模拟临床多学科会诊的协作框架，显著提升了电子病历数据的预测性能与可解释性，为临床决策支持系统提供了新范式。

该研究由北京大学、北医三院、爱丁堡大学、苏黎世联邦理工学院等团队联合完成，作者为：王子翔、朱英豪、赵慧雅、郑晓琛、睢德昊、王天龙、唐雯、王亚沙、Ewen M. Harrison、潘成伟、高峻逸、马连韬。

![ColaCare框架图](https://mmbiz.qpic.cn/mmbiz_png/dyabGzHWib79tuV4pibaC73OuN1FCYwLtmb9c7qurVKoDiaxEXibbhlqcdEKQ2x1arPwmkcaBYsewF4EsC1IQT697A/640?wx_fmt=png&from=appmsg&wxfrom=13&tp=wxpic#imgIndex=0)

## 研究背景与目标：智能协作破局——DeepSeek驱动的多专家会诊框架重构临床决策新范式

在电子病历（Electronic Health Record，EHR）建模领域，深度学习虽已构建从特征提取到健康预测的全流程模型，却深陷"数据孤岛"困境。现有方法如同封闭的黑箱系统，仅依赖数据驱动范式，难以融合临床语义知识，导致模型对医疗特征的理解停留在表层。这种技术瓶颈直接制约临床应用——医生难以信任缺乏解释性的预测结果，而静态知识体系更无法适应医学指南的快速迭代。

受到人类专家联合会诊（Multidisciplinary Team，MDT）以提升疾病诊疗可靠性的方式的启发，本研究提出ColaCare框架，将DeepSeek大语言模型与多智能体协作机制结合：

1. **知识动态进化**：通过检索增强生成（Retrieval-Augmented Generation，RAG）技术整合医疗权威指南，建立可实时更新的医学知识中枢，破解传统模型知识固化难题
2. **多智能体协作**：创新设计DoctorAgent与MetaAgent智能体角色，依托DeepSeek大语言模型，前者实现EHR数据深度解析，后者协调多轮循证辩论与共识形成，精准模拟MDT会诊决策流程
3. **透明决策链路**：将DeepSeek的语义推理能力与结构化数据分析结合，生成"数据预测-临床推理-指南依据"三位一体的诊断报告，为医生提供可验证的决策路径

## 研究方法设计：三阶引擎驱动——DeepSeek智能体协同决策架构解析

ColaCare框架以DeepSeek大模型为核心引擎，构建"特征提取-知识增强-群体决策"的三层架构，精准复现临床MDT会诊的决策精髓：

### 1. 结构化EHR信息提取模块
负责处理患者的EHR数据，并通过EHR模型生成多维嵌入向量。

### 2. 检索增强生成模块
专门处理临床诊疗指南并进行相关性知识检索。

### 3. 多智能体协同会诊模块
由多个大语言模型驱动的DoctorAgent与MetaAgent通过交互决策机制共同生成最终诊疗报告。

![多智能体协作会诊模块](https://mmbiz.qpic.cn/mmbiz_png/dyabGzHWib79tuV4pibaC73OuN1FCYwLtmmZKfSe1zV8NbgibQIVGOib6xaVEggj1tricgofKmvSWAcjCrqLicwMcc2Q/640?wx_fmt=png&from=appmsg&wxfrom=13&tp=wxpic#imgIndex=1)

### 多智能体协同会诊模块的三阶段工作流程

1. **初始评估阶段**：多个DoctorAgent基于EHR输出生成初始评估意见
2. **初步整合阶段**：MetaAgent整合上述意见形成初步诊疗报告
3. **迭代会诊阶段**：启动迭代式会诊流程，通过DoctorAgent与MetaAgent的多轮交互协同，直至达成医疗决策共识，形成终版诊疗报告

该机制通过动态知识协商与群体决策优化，有效融合多维度临床推理路径，最终输出符合循证医学标准的规范化诊疗方案。

## 研究数据纳入

本研究采用三个真实世界的EHR数据集，以增强实验框架的全面性与实用性：

### 1. MIMIC-IV重症监护数据集
该数据集是麻省理工学院发布的公开重症监护病房（Intensive Care Unit，ICU）数据库，包含超过40,000名患者的详细诊疗记录。数据集涵盖人口统计信息、生命体征、实验室检验结果、药物使用、临床笔记及死亡率统计等多维度数据。

### 2. 西班牙HM医院Covid Data Save Lives新冠重症患者数据集（CDSL数据集）
该数据集由西班牙HM医院提供，包含4,479名确诊或疑似COVID-19患者的匿名化诊疗记录。数据集提供了丰富的医疗特征，包括诊断信息、治疗方案、住院记录、ICU停留时间、影像学检查结果、实验室检验数据以及患者出院或死亡状态。

### 3. 北医三院终末期肾病患者数据集（ESRD数据集）
该数据集包含656名患者的纵向诊疗记录，时间跨度为2006年1月1日至2018年1月1日，共计13,091次就诊记录。数据集涵盖患者基线信息、就诊记录及临床结局，特别适用于慢性肾病患者的健康状态预测研究。

## 实验结果

### 基础性能评测

本工作在三个数据集上评测了ColaCare在院内死亡率预测和30天再入院预测任务上的表现，其性能超越了深度学习模型，集成学习方法和大语言模型驱动方法，验证了模拟临床多学科会诊的协作框架的有效性。

### 消融实验

本研究通过测试四个变体模型评估各模块对性能的影响：

1. 移除RAG模块，不向LLM提供相关文档
2. 移除融合网络，直接提示LLM基于最终报告生成预测结果
3. 不集成领域专家模型，省略来自领域专家模型的信息
4. 移除会诊流程，直接将领域专家模型分析结果和相关文档信息融合生成预测

实验结果表明：RAG模块、领域专家模型、模拟会诊流程和融合网络等模块在ColaCare框架中都发挥了重要作用。

## 案例研究

### 病例背景
患者为46岁女性，诊断为慢性肾小球肾炎导致的终末期肾病（ESRD），DeepSeek需评估其1年内的死亡风险。

### 初始诊断意见

**DoctorAgent 1**
- **风险评估**：中度风险（0.55）
- **关键依据**：二氧化碳结合力显著降低、白蛋白低于参考范围、高营养摄入可能掩盖营养吸收不良

**DoctorAgent 2**
- **风险评估**：低风险（0.17）
- **关键依据**：舒张压高于死亡患者中位数、血氯处于正常范围、血肌酐未达到典型阈值

**DoctorAgent 3**
- **风险评估**：高风险（0.69）
- **关键依据**：血钾显著低于参考范围、白蛋白与高营养摄入的矛盾现象提示液体超负荷风险

### 多轮协作辩论与共识形成

经过MetaAgent的初步整合和三轮协作辩论，三位DoctorAgent最终达成共识：

**诊断结论**：患者属ESRD死亡高风险人群。

**核心依据**：
1. 代谢性酸中毒（二氧化碳结合力18.7 mmol/L）加速肾病进展
2. 低白蛋白血症（30.2 g/L）与低钾血症（3.11 mmol/L）共同导致营养不良-心血管恶性循环
3. 高营养摄入与低蛋白血症的矛盾现象提示需调整肠内营养方案

**干预建议**：
1. 紧急纠正低钾血症（目标>4 mmol/L）
2. 优化酸中毒管理（碳酸氢钠补充）
3. 制定个体化低蛋白-高热量营养计划

### 临床意义

本例展示ColaCare框架如何通过多专科智能体协作，突破单一视角局限。DoctorAgent 2被专家团体说服，修正了结论。MetaAgent综合了多方意见，生成详细、多视角、可解释的病历分析结果。在整个流程中，DeepSeek可实时检索权威指南，确保决策依据与最新医学进展同步。

## 结论

本研究提出ColaCare框架，通过大语言模型驱动的多智能体协作机制，创新性地将临床多学科团队会诊范式与检索增强生成技术相结合，显著提升了电子病历建模的预测性能与可解释性。

框架核心通过模拟真实临床决策的协作与迭代流程，实现了"数据驱动分析-医学知识融合-动态辩论纠偏"的一体化推理链路。在MIMIC-IV、CDSL和ESRD三个真实数据集上的实验表明，ColaCare在死亡率与再入院率预测任务中性能都有稳定提升，其生成的报告可精准定位关键临床特征并引用权威指南证据。

## 代码开源与系统演示

- 研究样例及问卷地址：https://colacare.netlify.app
- 在线演示系统：https://pku-aicare.github.io/ColaCare-Demo
- ArXiv论文链接：https://arxiv.org/abs/2410.02551

---

*医维矩阵实验室*
*2025年3月27日*